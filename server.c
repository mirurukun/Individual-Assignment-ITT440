#include<stdio.h>#include<string.h>	#include<stdlib.h>#include<sys/socket.h>#include<arpa/inet.h> 	#include<unistd.h>	#include<netdb.h>	#include<arpa/inet.h>#define PORT 8080int main(int argc , char const* argv[]){	int servsock , new_socket , i;	int addr_len = sizeof(struct sockaddr_in);	struct sockaddr_in server, client ;	struct hostent *he;    struct in_addr **addr_list;	char hostname[100] , ip_address[100];		//Create socket	if ((servsock = socket(AF_INET, SOCK_STREAM, 0)) < 0) 	{        printf("\n Socket creation error \n");        exit(EXIT_FAILURE);    }	//attaching socket to the port 8080	server.sin_family = AF_INET;	server.sin_addr.s_addr = INADDR_ANY;	server.sin_port = htons(PORT);		//Bind	if( bind(servsock,(struct sockaddr *)&server, sizeof(server)) < 0)	{		printf("Bind failed \n");		exit(EXIT_FAILURE);	}	else	{		printf("Bind done \n");	}	//Listening	 if (listen(servsock, 3) < 0) 	 {		printf("socket failed \n");		exit(EXIT_FAILURE);	 }	//Accept connection	printf("Waiting connection from client... \n");		while( (new_socket = accept(servsock, (struct sockaddr *)&client, (socklen_t*)&addr_len)) )	{		printf("Connection has been established \n");				//received domain name from client		if(recv(new_socket, hostname, sizeof(hostname),0) < 0)		{			printf("Receive failed \n");		}		else		{			printf("Reply received \n");		}        if ( (he = gethostbyname(hostname) ) == NULL)        {                //gethostbyname failed                herror("gethostbyname");                exit(EXIT_FAILURE);        }        addr_list = (struct in_addr **) he->h_addr_list;        for(i = 0; addr_list[i] != NULL; i++)        {                //Return the first one;                strcpy(ip_address , inet_ntoa(*addr_list[i]) );        }		//Reply to the client		write(new_socket, ip_address, strlen(ip_address));	}		if (new_socket<0)	{		printf("accept failed \n");		exit(EXIT_FAILURE);	}		//closing the connected socket	close(new_socket);	shutdown(servsock, SHUT_RDWR);		return 0;}